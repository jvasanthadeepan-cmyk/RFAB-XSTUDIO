<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Admin - Manage Users" />
  <title>Manage Users - Admin</title>
  <link rel="stylesheet" href="manageusers.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
  <div class="background-gradient"></div>

  <!-- Navigation Header -->
  <header class="navbar">
    <div class="navbar-container">
      <div class="navbar-brand">
        <div class="brand-icon">
          <i class="fas fa-users-cog"></i>
        </div>
        <span class="brand-text">Manage Users</span>
      </div>

      <button class="logout-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
        <span>Back</span>
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Title Section -->
    <section class="title-section">
      <h1>User Management</h1>
      <p>View and edit regular user details (Admin users are hidden)</p>
    </section>

    <!-- Search Section -->
    <section class="search-section" style="margin-bottom: 30px; display: flex; gap: 10px;">
      <input 
        type="text" 
        id="searchInput" 
        placeholder="Search by username, email, or roll number..." 
        onkeyup="filterUsers()"
        style="flex: 1; padding: 12px 16px; border: 2px solid #0066ff; border-radius: 12px; font-size: 14px;"
      />
      <button 
        onclick="filterUsers()" 
        style="padding: 12px 24px; background: linear-gradient(135deg, #0066ff, #0099ff); color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 14px;"
      >
        <i class="fas fa-search"></i> Search
      </button>
      <button 
        onclick="clearSearch()" 
        style="padding: 12px 24px; background: #e5e7eb; color: #1a1a1a; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; font-size: 14px;"
      >
        <i class="fas fa-times"></i> Clear
      </button>
    </section>

    <!-- Users Table -->
    <section class="output-section">
      <div class="output-header">
        <h2>All Regular Users</h2>
        <span id="userCount" style="color: #0066ff; font-weight: 600;"></span>
      </div>
      <div id="usersContainer" class="output-content"></div>
    </section>
  </main>

  <!-- Edit User Modal -->
  <div id="editModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Edit User Details</h2>
        <button class="close-btn" onclick="closeEditModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-body">
        <form id="editForm">
          <div class="form-group">
            <label for="editUsername">Username</label>
            <input type="text" id="editUsername" placeholder="Enter username" required />
          </div>

          <div class="form-group">
            <label for="editPassword">Password</label>
            <div style="display: flex; gap: 8px; align-items: center;">
              <input 
                type="text" 
                id="editPassword" 
                placeholder="Password"
                style="flex: 1;"
              />
              <button 
                type="button"
                id="togglePasswordBtn"
                onclick="togglePasswordVisibility()"
                style="padding: 12px 16px; background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: 600; width: auto; display: flex; align-items: center; justify-content: center; min-width: 48px;"
                title="Hide password"
              >
                <i class="fas fa-eye-slash"></i>
              </button>
            </div>
            <small style="color: #666; margin-top: 4px; display: block;">ğŸ‘ï¸ Click to hide/show password</small>
          </div>

          <div class="form-group">
            <label for="editFullname">Full Name</label>
            <input type="text" id="editFullname" placeholder="Enter full name" required />
          </div>

          <div class="form-group">
            <label for="editEmail">Email</label>
            <input type="email" id="editEmail" placeholder="Enter email" required />
          </div>

          <div class="form-group">
            <label for="editRollNo">Roll Number</label>
            <input type="text" id="editRollNo" placeholder="Enter roll number" required />
          </div>

          <div class="form-group">
            <label for="editDepartment">Department</label>
            <input type="text" id="editDepartment" placeholder="Enter department" required />
          </div>

          <div id="editMessage" class="status-message" style="display: none;"></div>
        </form>
      </div>

      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeEditModal()">Cancel</button>
        <button class="btn btn-primary" onclick="saveUserChanges()">
          <i class="fas fa-save"></i> Save Changes
        </button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2026 R-FAB X-LAB</p>
  </footer>

  <script src="manageusers.js"></script>
</body>
</html>